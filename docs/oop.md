
- [类与对象](#类与对象)
- [继承](#继承)
- [封装](#封装)
- [抽象类和方法](#抽象类和方法)

# 类与对象

类是Java的基本元素结构。类定义一种新的引用类型。
类的定义包括一个签名和一个主体。

成员包括：类字段、类方法、实例字段、实例方法。  
成员可以使用访问修饰符 public、protected、private 。隐藏成员是一种面向对象设计技术，叫做数据封装。

超类（父类）+子类  
子类继承超类的成员，可以声明新成员，或使用新的实现覆盖继承的方法。  
类还可能实现一个或多个接口。接口类似类，但其方法没有实现主体。从Java8之后，可以使用default指定方法的默认实现。类必须为接口的非默认方法提供实现主体。实现某个接口的类的实例，也是这个接口类型的实例。

```java
// 一个类的声明示例
public class Integer extends Number implements Serializable, Comparable {}
```

类的修饰符：public protected abstract final strictfp  
字段修饰符：public protected private static final transient volatile

方法签名中不显示隐式参数this。在类的内部，一般也很少用到，除非可能引起误解，例如：子类与父类的同名方法，类的成员字段与局部变量同名。

构造方法是用于初始化实例中的字段。如果未明确指定，编译器会提供一个默认构造方法。  
构造方法与类同名。构造方法不指定返回值类型。构造方法也不能返回任何值。  
构造方法可以有多个，编译器会根据参数的数量和类型自动选择合适的构造方法。  
在一个构造方法中可以调用另一个构造方法，这样可以节约重复代码。  
当使用new运算符时，先分配内存存储新建的对象实例，然后调用构造方法并传入参数，构造方法使用这些参数初始化对象。

类也有构造方法，但对开发者不可见，在类文件中（使用javap查看），其名称是`<clint>`。

开发者可以通过“静态初始化程序”初始化类的字段。“静态初始化程序”由static关键字和随后的花括号中的代码组成。  
类可以有多个静态初始化程序。
```java
public class TrigCircle {
    private static final int NUMPTS = 500;
    private static double sth = 0.0;

    // 静态初始化代码
    static {
        sth = 1.0;
    }
}
```

实例也有“实例初始化程序”，与类的“静态初始化程序”相似。实例也可以有多个实例初始化程序。不过现实中很少需要使用。
```java
public class TrigCircle {
    private int[] data = new int[10];
    { for(int i=0; i< 10;i++) data[i]=i;}
}
```

# 继承

继承是面向对象编程范式的核心。

使用final修饰的类无法被继承。

每个自定义的类都有超类，如果没有指定，那超类就是 java.lang.Object 。 Object是特殊的类，其没有超类。
Java中的所有类能表示为一个根为Object的树状图。

子类的构造方法中，可以通过 `super()` 调用父类的构造方法，但也只能在构造方法中调用，而且必须在构造方法的第一句就调用。  
实际上，Java会保证 `super()` 方法一定会被调用，不是明确调用就是隐式调用。  
父类的构造方法又会继续调用父类的父类的构造方法，形成构造方法链，直到顶端的Object为止。  
如果父类没有定义无参数的构造方法，那么其所有子类必须显式调用父类的构造方法。

如果类没有定义任何构造方法，默认会为其提供一个默认的无参数的构造方法。  
如果创建的public类不能公开实例话，就应该至少声明一个非public 的构造方法，以此避免插入默认的public构造方法。从不会实例化的类（如 java.lang.Math ）应该定义一个private构造函数。


字段的字段，如果与超类的字段同名，则会“遮盖”超类的字段。  
子类和方法，如果与超类的方法名称相同、参数相同、返回值相同，则会“覆盖”超类的方法。（覆盖方法的返回值类型可以是原方法返回值的子类，这叫协变返回。）  
调用被遮盖或被覆盖的字段或方法，可以通过`super.something`进行。但调用被覆盖的方法，只能在覆盖方法的内部进行。
> 注意，“遮盖”和“覆盖”的区别。遮盖只是默认看不到，覆盖是真的没有了。


子类的每个实例都包含一个完整的超类实例，其中包括所有不可访问的字段和方法，但不继承构造方法。

# 封装

将数据隐藏在类中，只能通过类的方法进行操作，这叫封装。  
操作方法的通用约定，一般以 get 和 set 开头，如果字段是布尔型，会使用 is 开头。例如： getRadius(), setRadius(), isReadable()。


Java不直接支持对包的访问控制，访问控制限制在类和成员层次。  
访问控制符：public、protected、private、无（默认包访问）。
访问规则
- **类的成员在类的主体内使用可以访问。**
- **类的public成员，在任何地方都可以访问。最宽松。**
- **类的private成员，只能在类的内部访问。最严格。**
- **类的protected成员，能被子类访问，也能被同包的类访问。**
- **不使用任何修饰符的成员，只能被同包的类访问。**

使用public声明的字段必须使用final，确保是常量或不能修改的对象。

设计API时，需要注意访问限制，先严后送。因为提高访问限制会导致不向后兼容。

# 抽象类和方法

抽象方法，只定义签名，不提供实现。

只要类中有一个抽象方法，则该类自动成为抽象类，而且必须声明为 abstract class，否则会编译报错。  
抽象类无法实例化。  
抽象类的子类必须覆盖超类的每个抽象方法并提供实现，这样才能实例化。这种类一般叫做具体子类。  
抽象类的子类没有全部实现父类的抽象方法，那么该子类还是抽象类。  
使用static、private和final声明的方法不能是抽象方法。  
finale类中不能含有抽象方法。
